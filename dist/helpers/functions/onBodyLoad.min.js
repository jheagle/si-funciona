"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/stable");var _queueManager=_interopRequireDefault(require("./queueManager"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __awaiter=function(e,r,t,o){return new(t||(t=Promise))((function(n,u){function i(e){try{s(o.next(e))}catch(e){u(e)}}function a(e){try{s(o.throw(e))}catch(e){u(e)}}function s(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}s((o=o.apply(e,r||[])).next())}))};const queue=[],manager=(0,_queueManager.default)();let observer=null;const doReset=()=>observer=null,initializeObserver=()=>__awaiter(void 0,void 0,void 0,(function*(){return observer=new MutationObserver((()=>{if(document.body){for(;queue.length;)manager(queue.shift());observer.disconnect(),doReset()}})),observer.observe(document.documentElement,{childList:!0}),observer})),onBodyLoad=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&doReset(),queue.push(e),null===observer&&__awaiter(void 0,void 0,void 0,(function*(){return observer=new MutationObserver((()=>{if(document.body){for(;queue.length;)manager(queue.shift());observer.disconnect(),doReset()}})),observer.observe(document.documentElement,{childList:!0}),observer})),queue};var _default=onBodyLoad;exports.default=_default;