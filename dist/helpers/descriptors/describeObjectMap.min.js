"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.array.find-index.js"),require("core-js/modules/es.array.find.js"),require("core-js/stable");const _assignDescriptor=_interopRequireDefault(require("./assignDescriptor")),_checkClearValues=_interopRequireDefault(require("./checkClearValues")),_checkDescriptorComplete=_interopRequireDefault(require("./checkDescriptorComplete")),_compareDescriptor=_interopRequireDefault(require("./compareDescriptor")),_describeObject=_interopRequireDefault(require("./describeObject")),_nextReference=_interopRequireDefault(require("./nextReference")),_sameDescriptor=_interopRequireDefault(require("./sameDescriptor"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const describeObjectMap=function(e){const r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.mapLimit,i=void 0===t?1e9:t,n=r.depthLimit,c=void 0===n?-1:n,u=r.keepValues,l=void 0!==u&&u,s=[(0,_describeObject.default)(e)];s[0].index=0;const o=function e(r,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};let u=s.length;const o=t?(0,_nextReference.default)(r,t.index):void 0,a=void 0!==o?r.details[o]:null;if(t){(r.isArray?t.value:[t.value[t.value.length-1]]).forEach((function(c){const l=(0,_describeObject.default)(c),o=s.findIndex((function(e){return(0,_compareDescriptor.default)(l,e)}));if(o>=0&&(u=o,l.length&&(0,_sameDescriptor.default)(l,s[o])&&(t.circular=!0,r.details[t.index]=t)),u>=i)return s;if(0===n)return s;if(l.isArray){let e;u=null!==(e=t.arrayReference)&&void 0!==e?e:u,r.details[t.index].arrayReference=u}else{let e;u=null!==(e=t.objectReference)&&void 0!==e?e:u,r.details[t.index].objectReference=u}if(l.index=u,o<0&&(s[u]=s[u]?(0,_assignDescriptor.default)(s[u],l):l),s[r.index]=(0,_assignDescriptor.default)(s[r.index],r),!(t=s[r.index].details.find((function(e){return e.key===t.key}))).circular){const t=(0,_nextReference.default)(l,-1),i=void 0!==t?l.details[t]:null;return e(l,i,--n,(function(t){return e(r,a,--n)}))}}))}return s[r.index]=(0,_assignDescriptor.default)(s[r.index],(0,_checkDescriptorComplete.default)(r)),s[r.index]=(0,_checkClearValues.default)(s[r.index],l),a?e(r,a,--n):c(s)},a=s[0],d=(0,_nextReference.default)(a,-1);return void 0===d?(s[0]=(0,_assignDescriptor.default)(s[0],(0,_checkDescriptorComplete.default)(a)),s[0]=(0,_checkClearValues.default)(s[0],l),s):o(a,a.details[d],c)},_default=describeObjectMap;exports.default=_default;