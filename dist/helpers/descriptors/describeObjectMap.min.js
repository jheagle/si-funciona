"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es.object.to-string.js"),require("core-js/modules/esnext.async-iterator.for-each.js"),require("core-js/modules/esnext.iterator.constructor.js"),require("core-js/modules/esnext.iterator.for-each.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.array.find-index.js"),require("core-js/modules/es.array.find.js"),require("core-js/modules/esnext.async-iterator.find.js"),require("core-js/modules/esnext.iterator.find.js"),require("core-js/stable");const _assignDescriptor=_interopRequireDefault(require("./assignDescriptor")),_checkClearValues=_interopRequireDefault(require("./checkClearValues")),_checkDescriptorComplete=_interopRequireDefault(require("./checkDescriptorComplete")),_compareDescriptor=_interopRequireDefault(require("./compareDescriptor")),_describeObject=_interopRequireDefault(require("./describeObject")),_nextReference=_interopRequireDefault(require("./nextReference")),_sameDescriptor=_interopRequireDefault(require("./sameDescriptor"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const describeObjectMap=function(e){const r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.mapLimit,i=void 0===t?1e9:t,s=r.depthLimit,n=void 0===s?-1:s,o=r.keepValues,c=void 0!==o&&o,u=[(0,_describeObject.default)(e)];u[0].index=0;const a=function e(r,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};let o=u.length;const a=t?(0,_nextReference.default)(r,t.index):void 0,l=void 0!==a?r.details[a]:null;if(t){(r.isArray?t.value:[t.value[t.value.length-1]]).forEach((function(n){const c=(0,_describeObject.default)(n),a=u.findIndex((function(e){return(0,_compareDescriptor.default)(c,e)}));if(a>=0&&(o=a,c.length&&(0,_sameDescriptor.default)(c,u[a])&&(t.circular=!0,r.details[t.index]=t)),o>=i)return u;if(0===s)return u;if(c.isArray){let e;o=null!==(e=t.arrayReference)&&void 0!==e?e:o,r.details[t.index].arrayReference=o}else{let e;o=null!==(e=t.objectReference)&&void 0!==e?e:o,r.details[t.index].objectReference=o}if(c.index=o,a<0&&(u[o]=u[o]?(0,_assignDescriptor.default)(u[o],c):c),u[r.index]=(0,_assignDescriptor.default)(u[r.index],r),!(t=u[r.index].details.find((function(e){return e.key===t.key}))).circular){const t=(0,_nextReference.default)(c,-1),i=void 0!==t?c.details[t]:null;return e(c,i,--s,(function(t){return e(r,l,--s)}))}}))}return u[r.index]=(0,_assignDescriptor.default)(u[r.index],(0,_checkDescriptorComplete.default)(r)),u[r.index]=(0,_checkClearValues.default)(u[r.index],c),l?e(r,l,--s):n(u)},l=u[0],d=(0,_nextReference.default)(l,-1);return void 0===d?(u[0]=(0,_assignDescriptor.default)(u[0],(0,_checkDescriptorComplete.default)(l)),u[0]=(0,_checkClearValues.default)(u[0],c),u):a(l,l.details[d],n)},_default=describeObjectMap;exports.default=_default;