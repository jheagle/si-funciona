"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/esnext.iterator.constructor.js"),require("core-js/modules/esnext.iterator.find.js"),require("core-js/modules/esnext.iterator.for-each.js"),require("core-js/stable");var _assignDescriptor=_interopRequireDefault(require("./assignDescriptor")),_checkClearValues=_interopRequireDefault(require("./checkClearValues")),_checkDescriptorComplete=_interopRequireDefault(require("./checkDescriptorComplete")),_compareDescriptor=_interopRequireDefault(require("./compareDescriptor")),_describeObject=_interopRequireDefault(require("./describeObject")),_nextReference=_interopRequireDefault(require("./nextReference")),_sameDescriptor=_interopRequireDefault(require("./sameDescriptor"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const describeObjectMap=function(e){let{mapLimit:r=1e9,depthLimit:t=-1,keepValues:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=[(0,_describeObject.default)(e)];c[0].index=0;const a=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e,u=c.length;const l=t?(0,_nextReference.default)(e,t.index):void 0,o=void 0!==l?e.details[l]:null;if(t){(e.isArray?t.value:[t.value[t.value.length-1]]).forEach((i=>{var n,l;const d=(0,_describeObject.default)(i),f=c.findIndex((e=>(0,_compareDescriptor.default)(d,e)));if(f>=0&&(u=f,d.length&&(0,_sameDescriptor.default)(d,c[f])&&(t.circular=!0,e.details[t.index]=t)),u>=r)return c;if(0===s)return c;if(d.isArray?(u=null!==(n=t.arrayReference)&&void 0!==n?n:u,e.details[t.index].arrayReference=u):(u=null!==(l=t.objectReference)&&void 0!==l?l:u,e.details[t.index].objectReference=u),d.index=u,f<0&&(c[u]=c[u]?(0,_assignDescriptor.default)(c[u],d):d),c[e.index]=(0,_assignDescriptor.default)(c[e.index],e),!(t=c[e.index].details.find((e=>e.key===t.key))).circular){const r=(0,_nextReference.default)(d,-1),t=void 0!==r?d.details[r]:null;return a(d,t,--s,(r=>a(e,o,--s)))}}))}return c[e.index]=(0,_assignDescriptor.default)(c[e.index],(0,_checkDescriptorComplete.default)(e)),c[e.index]=(0,_checkClearValues.default)(c[e.index],i),o?a(e,o,--s):n(c)},s=c[0],n=(0,_nextReference.default)(s,-1);return void 0===n?(c[0]=(0,_assignDescriptor.default)(c[0],(0,_checkDescriptorComplete.default)(s)),c[0]=(0,_checkClearValues.default)(c[0],i),c):a(s,s.details[n],t)};var _default=exports.default=describeObjectMap;